---
import { SEO } from 'astro-seo';
import SchemaOrg from './SchemaOrg.astro';

export interface Props {
  title: string;
  description: string;
  image?: string;
  canonicalURL?: string;
}

const { 
  title, 
  description, 
  image = '/images/cujiware-social-image.jpg',
  canonicalURL = Astro.url.href
} = Astro.props;

const baseUrl = Astro.site?.toString() || 'https://cujiware.com';
const imageURL = image.startsWith('http') ? image : new URL(image, baseUrl).toString();
const canonicalUrl = canonicalURL.startsWith('http') ? canonicalURL : new URL(canonicalURL, baseUrl).toString();
---

<SEO
  title={title}
  description={description}
  canonical={canonicalUrl}
  openGraph={{
    basic: {
      title: title,
      type: 'website',
      image: imageURL,
      url: canonicalUrl,
    },
    optional: {
      description: description,
      siteName: 'Cujiware',
    },
    image: {
      alt: 'Cujiware Membership - Premium WooCommerce & PrestaShop Plugins',
    }
  }}
  twitter={{
    card: 'summary_large_image',
    site: '@cujiware',
    title: title,
    description: description,
    image: imageURL,
    imageAlt: 'Cujiware Membership - Premium WooCommerce & PrestaShop Plugins',
  }}
/>

<SchemaOrg
  organization={{
    name: "Cujiware",
    url: baseUrl,
    logo: new URL("/images/logo.png", baseUrl).toString(),
    sameAs: [
      "https://twitter.com/cujiware",
      "https://facebook.com/cujiware",
      "https://instagram.com/cujiware"
    ]
  }}
  product={{
    name: "Cujiware Membership",
    description: "Premium WooCommerce & PrestaShop plugins without domain restrictions",
    offers: [
      {
        name: "Monthly Plan",
        price: "12",
        priceCurrency: "USD",
        availability: "https://schema.org/InStock"
      },
      {
        name: "Semi-Annual Plan",
        price: "65",
        priceCurrency: "USD",
        availability: "https://schema.org/InStock"
      },
      {
        name: "Annual Plan",
        price: "120",
        priceCurrency: "USD",
        availability: "https://schema.org/InStock"
      }
    ]
  }}
/>