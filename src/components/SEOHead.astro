---
import { SEO } from 'astro-seo';
import SchemaOrg from './SchemaOrg.astro';

export interface Props {
  title: string;
  description: string;
  image?: string;
  canonicalURL?: string;
}

const baseUrl = Astro.site?.toString() || 'https://cujiware.com';

const {
  title,
  description,
  image = new URL("/CujiwareLetras.svg", baseUrl).toString(),
  canonicalURL = Astro.url.href
} = Astro.props;

const imageURL = image.startsWith('http') ? image : new URL(image, baseUrl).toString();
const canonicalUrl = canonicalURL.startsWith('http') ? canonicalURL : new URL(canonicalURL, baseUrl).toString();
---

<SEO
  title={title}
  description={description}
  canonical={canonicalUrl}
  openGraph={{
    basic: {
      title: title,
      type: 'website',
      image: imageURL,
      url: canonicalUrl,
    },
    optional: {
      description: description,
      siteName: 'Cujiware',
    },
    image: {
      alt: 'Cujiware',
    }
  }}
  twitter={{
    card: 'summary_large_image',
    site: '@cujiware',
    title: title,
    description: description,
    image: imageURL,
    imageAlt: 'Cujiware - Plugins Premium para Wordpress + WooCommerce & PrestaShop con acceso ilimitado a todos los plugins con una membresía',
  }}
/>

<SchemaOrg
  organization={{
    name: "Cujiware",
    url: baseUrl,
    image: new URL("/CujiwareLetras.svg", baseUrl).toString(),
    logo: new URL("/CujiwareLetras.svg", baseUrl).toString(),
    sameAs: [
      "https://instagram.com/cujiware",
      "https://www.tiktok.com/@cujiware"
    ]
  }}
  product={{
    name: title,
    image: imageURL || new URL("/CujiwareLetras.svg", baseUrl).toString(),
    description: description,
    offers: [
      {
        "@type": "Offer",
        "priceSpecification": {
          "@type": "UnitPriceSpecification",
          "priceCurrency": "USD",
          "price": 15,
          "billingIncrement": 1,
          "billingDuration": 1,
          "unitCode": "MON",
          "unitText": "Mes",
          "description": "Membresía recurrente mensual"
        },
        "businessFunction": "http://purl.org/goodrelations/v1#LeaseOut",
        "url": "https://cujiware.com/suscripcion/",
        name: "Monthly Plan",
      },
      {
        name: "Semi-Annual Plan",
        "@type": "Offer",
        "priceSpecification": {
          "@type": "UnitPriceSpecification",
          "priceCurrency": "USD",
          "price": 70,
          "billingIncrement": 1,
          "billingDuration": 6,
          "unitCode": "MON",
          "unitText": "Semestre",
          "description": "Membresía recurrente semestral"
        },
        "businessFunction": "http://purl.org/goodrelations/v1#LeaseOut",
        "url": "https://cujiware.com/suscripcion/"
      },
      {
        name: "Annual Plan",
        "@type": "Offer",
        "priceSpecification": {
          "@type": "UnitPriceSpecification",
          "priceCurrency": "USD",
          "price": 120,
          "billingIncrement": 1,
          "billingDuration": 12,
          "unitCode": "MON",
          "unitText": "Año",
          "description": "Membresía recurrente anual"
        },
        "businessFunction": "http://purl.org/goodrelations/v1#LeaseOut",
        "url": "https://cujiware.com/suscripcion/"
      }
    ]
  }}
/>
